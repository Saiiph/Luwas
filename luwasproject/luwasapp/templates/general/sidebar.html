{% load static %}
<div class="sidebar">
    <div class="logo_content">
        <div class="logo">
            <i class='bx bxl-vk'></i>
            <div class="logo_name">Luwas</div>
        </div>
        <i class='bx bx-menu' id="btn"></i>
    </div>
    <ul class="nav_list">
        <li>
            <a href="{% url 'dashboard' %}">
                <i class='bx bx-grid-alt'></i>
                <span class="links_name">Dashboard</span>
            </a>
            <span class="tooltip">Dashboard</span>
        </li>
        <li>
            <a href="{% url 'incident_list' %}">
                <i class='bx bx-notepad'></i>
                <span class="links_name">Incident List</span>
            </a>
            <span class="tooltip">Incident List</span>
        </li>
        <li>
            <a href="{% url 'incident_assignment_list' %}">    
                <i class='bx bx-shield'></i>
                <span class="links_name">Assignment</span>
            </a>
            <span class="tooltip">Assignment</span>
        </li>
        <li>
            <a href="{%url 'user_profile' %}">
                <i class='bx bx-user'></i>
                <span class="links_name">Profile</span>
            </a>
            <span class="tooltip">Profile</span>
        </li>
        <li>
            <a href="#">
                <i class='bx bx-cog'></i>
                <span class="links_name">Settings</span>
            </a>
            <span class="tooltip">Settings</span>
        </li>
        <!-- Admin Actions -->
        {% if request.user.is_superuser %}
        <li>
            <a href="{%url 'list_users' %}">
                <i class='bx bx-cog'></i>
                <span class="links_name">Admin</span>
            </a>
            <span class="tooltip">Settings</span>
        </li>
        {% endif %}
    </ul>
    <div class="profile_content">
        <div class="profile">
            <div class="profile_details">
                <img src="{% static 'image/LairPfp.jpg' %}" alt="">
                <div class="name_job">
                    <div class="name">{{ user.first_name }} {{ user.last_name }}</div>
                    <div class="job">{{ user.profession }}</div>
                </div>
            </div>
            <i class='bx bx-log-out' id="log_out"></i>
        </div>
    </div>
</div>

<script>
    let btn = document.querySelector("#btn");
    let sidebar = document.querySelector(".sidebar");
    let logOutBtn = document.querySelector("#log_out");

    // Check local storage for sidebar state
    if (localStorage.getItem('sidebarState') === 'active') {
        sidebar.classList.add('active');
    }

    btn.onclick = function() {
        sidebar.classList.toggle("active");
        // Save the current state to local storage
        if (sidebar.classList.contains('active')) {
            localStorage.setItem('sidebarState', 'active');
        } else {
            localStorage.removeItem('sidebarState');
        }
    }

    logOutBtn.onclick = function() {
        window.location.href = "{% url 'logout' %}";  // Replace 'logout' with your actual logout URL name
    }
</script>