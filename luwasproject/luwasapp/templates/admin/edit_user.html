{% extends "general/base.html" %}

{% load static %}

{% block title %}Admin Panel Edit{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'admin_edit.css' %}">
{% endblock %}

{% block content %}
<form method="post" class="edit-form">
    {% csrf_token %}
    <h2>Edit User</h2>
    <div class="form-row">
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" value="{{ user.username }}">
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="first_name">First Name:</label>
            <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}">
        </div>
        <div class="form-group">
            <label for="last_name">Last Name:</label>
            <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="profession">Profession:</label>
            <input type="text" id="profession" name="profession" value="{{ user.profession }}">
        </div>
        <div class="form-group">
            <label for="contact_information">Contact Information</label>
            <input type="text" id="contact_information" name="contact_information" value="{{ user.contact_information }}">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="department">Department:</label>
            <select id="department" name="department" onchange="this.form.submit()">
                <option value="">-- Select Department --</option>
                {% for department in departments %}
                    <option value="{{ department.id }}" {% if department.id == department_id %}selected{% endif %}>{{ department.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="establishment">Establishment:</label>
            <select id="establishment" name="establishment">
                <option value="">-- Select Establishment --</option>
                {% for establishment in establishments %}
                    <option value="{{ establishment.id }}" {% if establishment.id == user.establishment_id %}selected{% endif %}>{{ establishment.name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <button type="submit" name="save" class="submit-btn">Save</button>
</form>

{% endblock %}